非常抱歉！这是我的疏忽。

白屏的原因是上一版代码的最后一行写了 `app.mount('#app')`，但在前面并没有定义 `app` 这个变量（导致 JavaScript 报错停止运行）。

请使用下面这个**紧急修复版**。我修正了启动逻辑，并加了一个“防白屏机制”：如果 Vue 加载失败，它会弹窗报错而不是一片空白。

### ✅ 紧急修复版 (复制即可恢复)

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>身材吃豆人 (修复版)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* 基础样式 */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f1f5f9; }
        
        /* 防止闪烁，但如果JS报错会移除这个属性 */
        [v-cloak] { display: none !important; }

        /* 玻璃拟态 */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        /* 吃豆人网格 */
        .pac-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 4px; max-width: 300px; margin: 0 auto; }
        .pac-cell { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; }
        .dot { width: 6px; height: 6px; background-color: #cbd5e1; border-radius: 50%; }
        .pacman { 
            width: 20px; height: 20px; background: #fbbf24; border-radius: 50%; 
            position: relative; z-index: 10;
            animation: chomp 0.3s infinite alternate;
        }
        @keyframes chomp { from { clip-path: polygon(100% 0%, 100% 100%, 50% 50%); } to { clip-path: polygon(100% 20%, 100% 80%, 50% 50%); } }
        .path-cleared .dot { background-color: transparent; } /* 吃掉豆子 */
        
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="text-slate-700">

<!-- 错误兜底显示 -->
<div id="error-display" style="display:none; padding:20px; text-align:center; color:red;">
    程序加载出错，请刷新页面重试。
</div>

<div id="app" v-cloak class="min-h-screen p-4 max-w-5xl mx-auto pb-20">
    
    <!-- 顶部提示 -->
    <div v-if="toastMsg" class="fixed top-4 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded bg-slate-800 text-white text-sm shadow-lg transition-all">
        {{ toastMsg }}
    </div>

    <!-- 标题栏 -->
    <header class="mb-6 flex justify-between items-center">
        <h1 class="text-xl font-bold flex items-center gap-2">
            <i class="fas fa-ghost text-amber-500"></i> 身材吃豆人
        </h1>
        <div class="flex gap-2">
            <button @click="syncGoogleSheet" :disabled="isLoading" class="bg-green-600 text-white px-3 py-1.5 rounded text-sm flex items-center gap-2 shadow hover:bg-green-700 transition">
                <i class="fas" :class="isLoading ? 'fa-spinner spin' : 'fa-sync'"></i>
                {{ isLoading ? '同步中' : '同步数据' }}
            </button>
            <button @click="showSettings = !showSettings" class="bg-white border px-3 py-1.5 rounded text-sm shadow-sm">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </header>

    <!-- 设置面板 -->
    <div v-if="showSettings" class="glass-panel p-4 rounded-xl mb-4 border-l-4 border-indigo-500">
        <div class="space-y-3">
            <div>
                <label class="block text-xs font-bold text-slate-500 mb-1">Sheet 链接 / ID</label>
                <div class="flex gap-2">
                    <input v-model="sheetInput" class="flex-1 border rounded px-2 py-1 text-sm" placeholder="粘贴链接...">
                    <button @click="saveSettings" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm">保存</button>
                </div>
            </div>
            <div class="flex gap-4">
                <div><label class="text-xs text-slate-500">初始体重</label><input type="number" v-model.number="settings.initialWeight" class="border rounded w-20 px-2 py-1 text-sm"></div>
                <div><label class="text-xs text-slate-500">目标体重</label><input type="number" v-model.number="settings.targetWeight" class="border rounded w-20 px-2 py-1 text-sm"></div>
            </div>
        </div>
    </div>

    <!-- 数据概览 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <!-- 左侧：吃豆人 -->
        <div class="glass-panel p-6 rounded-2xl text-center">
            <div class="mb-4">
                <span class="text-4xl font-bold text-slate-800">{{ currentWeight }}</span>
                <span class="text-slate-500 ml-1">kg</span>
            </div>
            <div class="pac-grid bg-slate-800 p-3 rounded-lg">
                <div v-for="n in 100" :key="n" class="pac-cell" :class="{'path-cleared': n < currentStep}">
                    <div v-if="n === currentStep" class="pacman"></div>
                    <div v-else-if="n === 100" class="fas fa-flag text-red-500 text-xs"></div>
                    <div v-else class="dot"></div>
                </div>
            </div>
            <div class="mt-4 flex justify-center gap-6 text-sm">
                <div class="text-emerald-600 font-bold">已减 {{ lostJin }} 斤</div>
                <div class="text-rose-500 font-bold">剩余 {{ remainingJin }} 斤</div>
            </div>
        </div>

        <!-- 右侧：图表 -->
        <div class="glass-panel p-4 rounded-2xl flex flex-col">
            <h3 class="text-sm font-bold text-slate-700 mb-2">趋势图</h3>
            <div id="mainChart" class="flex-1 min-h-[200px] w-full"></div>
        </div>
    </div>

    <!-- 数据列表 -->
    <div class="glass-panel rounded-xl overflow-hidden">
        <div class="p-3 bg-slate-50 border-b text-sm font-bold text-slate-600">历史记录 ({{ records.length }})</div>
        <div class="max-h-[300px] overflow-y-auto">
            <table class="w-full text-sm text-left">
                <thead class="sticky top-0 bg-white text-slate-400 text-xs">
                    <tr><th class="p-3">日期</th><th class="p-3">体重</th><th class="p-3">花费</th></tr>
                </thead>
                <tbody>
                    <tr v-for="r in sortedRecords" :key="r.id" class="border-b border-slate-50">
                        <td class="p-3 font-mono">{{ r.date }}</td>
                        <td class="p-3 font-bold">{{ r.weight }}</td>
                        <td class="p-3 text-slate-400">{{ r.cost }}</td>
                    </tr>
                </tbody>
            </table>
            <div v-if="records.length === 0" class="p-8 text-center text-slate-400 text-sm">
                暂无数据，请点击右上角同步
            </div>
        </div>
    </div>

</div>

<script>
// 错误捕获
window.onerror = function() {
    document.getElementById('error-display').style.display = 'block';
    document.getElementById('app').style.display = 'none';
};

const { createApp } = Vue;

createApp({
    data() {
        return {
            showSettings: false,
            toastMsg: '',
            isLoading: false,
            sheetId: '1Inbi59ix1oVaUqrXxZVev6uiy6eUZRMuqEV5ZG_tQDA',
            sheetInput: 'https://docs.google.com/spreadsheets/d/1Inbi59ix1oVaUqrXxZVev6uiy6eUZRMuqEV5ZG_tQDA/edit?usp=sharing',
            settings: { initialWeight: 80, targetWeight: 65 },
            records: [],
            chartInstance: null
        }
    },
    computed: {
        sortedRecords() { return [...this.records].sort((a, b) => new Date(b.date) - new Date(a.date)); },
        timelineRecords() { return [...this.records].sort((a, b) => new Date(a.date) - new Date(b.date)); },
        currentWeight() { return this.records.length ? this.timelineRecords[this.timelineRecords.length-1].weight : this.settings.initialWeight; },
        lostJin() { return Math.max(0, (this.settings.initialWeight - this.currentWeight) * 2).toFixed(1); },
        remainingJin() { return Math.max(0, (this.currentWeight - this.settings.targetWeight) * 2).toFixed(1); },
        currentStep() {
            const total = this.settings.initialWeight - this.settings.targetWeight;
            const lost = this.settings.initialWeight - this.currentWeight;
            if(total <= 0) return 100;
            return Math.floor(Math.min(100, Math.max(0, (lost/total)*100)));
        }
    },
    mounted() {
        const saved = localStorage.getItem('wt_data_v3');
        if(saved) {
            const p = JSON.parse(saved);
            this.records = p.records || [];
            this.settings = p.settings || this.settings;
            this.sheetId = p.sheetId || this.sheetId;
            this.sheetInput = this.sheetId; // 回填
        }
        this.$nextTick(() => this.initChart());
        window.addEventListener('resize', () => this.chartInstance && this.chartInstance.resize());
    },
    methods: {
        showToast(msg) { this.toastMsg = msg; setTimeout(() => this.toastMsg = '', 3000); },
        
        saveSettings() {
            const match = this.sheetInput.match(/\/d\/([a-zA-Z0-9-_]+)/);
            this.sheetId = match ? match[1] : this.sheetInput.trim();
            this.saveData();
            this.showToast('设置已保存');
        },
        
        saveData() {
            localStorage.setItem('wt_data_v3', JSON.stringify({
                records: this.records,
                settings: this.settings,
                sheetId: this.sheetId
            }));
            this.$nextTick(() => this.initChart());
        },

        // --- 万能日期解析 ---
        parseDate(val) {
            if(!val) return null;
            // Excel 数字
            if(!isNaN(val) && String(val).indexOf('-') === -1 && String(val).indexOf('/') === -1) {
                const d = new Date((val - 25569) * 86400 * 1000);
                return d.toISOString().split('T')[0];
            }
            // 字符串
            const d = new Date(String(val).replace(/\./g, '-').replace(/\//g, '-'));
            return isNaN(d.getTime()) ? null : d.toISOString().split('T')[0];
        },

        async syncGoogleSheet() {
            if(!this.sheetId) return this.showToast('请先填写 Sheet ID');
            this.isLoading = true;
            
            try {
                const url = `https://docs.google.com/spreadsheets/d/${this.sheetId}/gviz/tq?tqx=out:csv&sheet=Sheet1&_t=${Date.now()}`;
                const resp = await fetch(url);
                if(!resp.ok) throw new Error('连接失败，请检查链接权限');
                
                const csv = await resp.text();
                const wb = XLSX.read(csv, { type: 'string' });
                const rows = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]], { header: 1 });

                // 找表头
                let headRow = -1, dIdx = -1, wIdx = -1, cIdx = -1;
                for(let i=0; i<Math.min(10, rows.length); i++) {
                    const str = rows[i].join(' ').toLowerCase();
                    if(str.includes('日期') || str.includes('date')) {
                        headRow = i;
                        rows[i].forEach((c, idx) => {
                            const txt = String(c).trim();
                            if(['日期','Date'].includes(txt)) dIdx = idx;
                            if(['体重','Weight'].includes(txt)) wIdx = idx;
                            if(['花费','Cost'].includes(txt)) cIdx = idx;
                        });
                        break;
                    }
                }

                if(dIdx === -1 || wIdx === -1) throw new Error('未找到"日期"或"体重"列');

                const newRecs = [];
                for(let i = headRow + 1; i < rows.length; i++) {
                    const row = rows[i];
                    if(!row[dIdx]) continue;
                    const date = this.parseDate(row[dIdx]);
                    const weight = parseFloat(row[wIdx]);
                    if(date && !isNaN(weight)) {
                        newRecs.push({ 
                            id: Date.now()+i, 
                            date, 
                            weight, 
                            cost: cIdx !== -1 ? (parseFloat(row[cIdx])||0) : 0 
                        });
                    }
                }

                if(newRecs.length === 0) throw new Error('未解析出有效数据');
                
                this.records = newRecs;
                this.saveData();
                this.showToast(`成功同步 ${newRecs.length} 条数据`);

            } catch(e) {
                console.error(e);
                this.showToast(e.message);
            } finally {
                this.isLoading = false;
            }
        },

        initChart() {
            if(!this.records.length) return;
            const dom = document.getElementById('mainChart');
            if(!dom) return;
            
            if(!this.chartInstance) this.chartInstance = echarts.init(dom);
            
            const data = this.timelineRecords;
            this.chartInstance.setOption({
                grid: { top: 20, right: 20, bottom: 20, left: 40, containLabel: true },
                tooltip: { trigger: 'axis' },
                xAxis: { type: 'category', data: data.map(r => r.date) },
                yAxis: { type: 'value', scale: true },
                series: [{
                    data: data.map(r => r.weight),
                    type: 'line',
                    smooth: true,
                    areaStyle: { opacity: 0.2 },
                    itemStyle: { color: '#f59e0b' }
                }]
            });
        }
    }
}).mount('#app'); // <--- 这里修复了，直接挂载
</script>
</body>
</html>
```
